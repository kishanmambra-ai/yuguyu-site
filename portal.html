<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuguyu Partner Portal - Gym Administration</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- SweetAlert2 for Alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: { 
                        slate: { 850: '#151e32' },
                        primary: '#facc15' // Yellow-400
                    },
                    animation: {
                        'pulse-slow': 'pulse 12s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0f172a; color: white; overflow: hidden; }
        
        /* Glass Utilities */
        .glass-sidebar {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }
        .glass-header {
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }

        /* Navigation Active State */
        .nav-item {
            position: relative;
            transition: all 0.3s ease;
        }
        .nav-item.active {
            color: #facc15;
            background: rgba(250, 204, 21, 0.05);
        }
        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background-color: #facc15;
            border-top-right-radius: 4px;
            border-bottom-right-radius: 4px;
        }
        
        /* Table Styles */
        tr { transition: background-color 0.2s ease; }
        tr:hover td { background-color: rgba(255, 255, 255, 0.02); }

        /* Modal Transitions */
        .modal {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal.open {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .modal.open .modal-content {
            transform: scale(1);
        }

        /* SweetAlert Customization */
        div:where(.swal2-container) div:where(.swal2-popup) {
            background: rgba(30, 41, 59, 0.95) !important;
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff !important;
            border-radius: 1.5rem !important;
        }
        div:where(.swal2-icon) {
            border-color: #facc15 !important;
            color: #facc15 !important;
        }
        div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm {
            background-color: #facc15 !important;
            color: #0f172a !important;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(250, 204, 21, 0.3);
        }
    </style>
</head>
<body class="flex h-screen w-full font-sans text-slate-200">

    <!-- BACKGROUND GLOWS -->
    <div class="fixed inset-0 -z-10 pointer-events-none">
        <div class="absolute top-[-20%] left-[-10%] w-[60vw] h-[60vw] bg-yellow-500/5 rounded-full blur-[150px] mix-blend-screen animate-pulse-slow"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-indigo-900/10 rounded-full blur-[120px] mix-blend-screen"></div>
    </div>

    <!-- SIDEBAR -->
    <aside class="w-72 glass-sidebar flex flex-col h-full flex-shrink-0 z-30 transition-transform duration-300 absolute lg:relative -translate-x-full lg:translate-x-0 shadow-2xl lg:shadow-none" id="sidebar">
        <!-- Brand -->
        <div class="p-8 flex items-center justify-between mb-2">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl flex items-center justify-center text-slate-900 shadow-lg shadow-yellow-400/20">
                    <i data-lucide="zap" class="w-6 h-6 fill-current"></i>
                </div>
                <div>
                    <span class="text-xl font-bold tracking-tight text-white block leading-none">Yuguyu<span class="text-yellow-400">.</span></span>
                    <span class="text-[10px] text-slate-400 uppercase tracking-wider font-bold">Partner Portal</span>
                </div>
            </div>
            <button class="lg:hidden text-slate-400 hover:text-white transition-colors" onclick="toggleSidebar()">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </div>

        <!-- Navigation Links -->
        <nav class="flex-1 space-y-1.5 px-4 py-4 overflow-y-auto">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider px-4 mb-2">Main Menu</div>
            
            <button onclick="showPage('dashboard')" class="nav-item active w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg hover:bg-white/5 transition-all group">
                <i data-lucide="layout-dashboard" class="w-5 h-5 group-hover:text-yellow-400 transition-colors"></i> Dashboard
            </button>
            <button onclick="showPage('members')" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg hover:bg-white/5 transition-all group">
                <i data-lucide="users" class="w-5 h-5 group-hover:text-yellow-400 transition-colors"></i> Members
            </button>
            <button onclick="showPage('access')" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg hover:bg-white/5 transition-all group">
                <i data-lucide="shield-check" class="w-5 h-5 group-hover:text-yellow-400 transition-colors"></i> App Access
            </button>
            <button onclick="showPage('trainers')" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg hover:bg-white/5 transition-all group">
                <i data-lucide="dumbbell" class="w-5 h-5 group-hover:text-yellow-400 transition-colors"></i> Trainers
            </button>

            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider px-4 mb-2 mt-6">Settings</div>
            
            <button onclick="Swal.fire({icon:'info', title:'Coming Soon', text:'Billing management will be available in the next update.', background:'#1e293b', color:'#fff'})" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg hover:bg-white/5 transition-all group text-slate-400">
                <i data-lucide="credit-card" class="w-5 h-5 group-hover:text-white transition-colors"></i> Billing & Licenses
            </button>
            <button onclick="Swal.fire({icon:'info', title:'Coming Soon', text:'Gym branding settings will be available soon.', background:'#1e293b', color:'#fff'})" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg hover:bg-white/5 transition-all group text-slate-400">
                <i data-lucide="settings" class="w-5 h-5 group-hover:text-white transition-colors"></i> Gym Settings
            </button>
        </nav>

        <!-- Gym Profile Footer -->
        <div class="p-4 border-t border-white/5 bg-slate-900/30">
            <div class="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5 hover:border-white/10 transition-all cursor-pointer group">
                <div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center border border-white/10 overflow-hidden text-yellow-400 group-hover:scale-105 transition-transform">
                    <span class="font-bold text-xs">IG</span>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-bold text-white truncate group-hover:text-yellow-400 transition-colors">Iron Gym</p>
                    <div class="flex items-center gap-1.5">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        <p class="text-[10px] text-green-400 truncate font-medium">142 Licenses Active</p>
                    </div>
                </div>
                <button onclick="logout()" class="text-slate-500 hover:text-red-400 p-1.5 hover:bg-white/5 rounded-lg transition-all"><i data-lucide="log-out" class="w-4 h-4"></i></button>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative bg-slate-900/20">
        
        <!-- Header -->
        <header class="h-20 glass-header flex items-center justify-between px-6 lg:px-10 sticky top-0 z-20">
            <div class="flex items-center gap-4">
                <button class="lg:hidden text-white p-2 hover:bg-white/5 rounded-lg transition-colors" onclick="toggleSidebar()">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
                <div class="flex flex-col">
                    <h2 id="page-title" class="text-xl font-bold text-white">Dashboard Overview</h2>
                    <p id="page-subtitle" class="text-xs text-slate-400 hidden sm:block">Manage your facility's digital ecosystem</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <div class="relative hidden md:block">
                    <i data-lucide="search" class="w-4 h-4 text-slate-400 absolute left-3 top-3"></i>
                    <input type="text" placeholder="Search members..." class="bg-slate-800/50 border border-white/10 rounded-full py-2.5 pl-10 pr-4 text-sm text-white focus:outline-none focus:border-yellow-400/50 focus:ring-1 focus:ring-yellow-400/50 w-64 transition-all placeholder-slate-500">
                </div>
                <button class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 relative transition-all border border-white/5 hover:border-white/20">
                    <i data-lucide="bell" class="w-5 h-5 text-slate-300"></i>
                    <span class="absolute top-2 right-2.5 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-900"></span>
                </button>
                <div class="md:hidden w-10 h-10 rounded-full bg-slate-800 border border-white/10 overflow-hidden flex items-center justify-center">
                    <span class="text-xs font-bold">A</span>
                </div>
            </div>
        </header>

        <!-- Scrollable Content Area -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8 lg:p-10 space-y-8 scroll-smooth custom-scrollbar" id="content-area">
            
            <!-- DASHBOARD VIEW -->
            <div id="view-dashboard" class="page-view space-y-8 fade-in">
                <!-- Stats Row -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Total Members -->
                    <div class="glass-card p-6 rounded-2xl relative overflow-hidden group">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-blue-500/10 rounded-xl text-blue-400 group-hover:scale-110 transition-transform"><i data-lucide="users" class="w-6 h-6"></i></div>
                            <span class="bg-white/5 text-slate-400 text-xs px-2 py-1 rounded border border-white/5">Total</span>
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-1" id="stat-total-members">0</h3>
                        <p class="text-slate-400 text-sm font-medium">Registered Members</p>
                    </div>
                    
                    <!-- App Adoption -->
                    <div class="glass-card p-6 rounded-2xl relative overflow-hidden group border-b-2 border-b-yellow-400">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-yellow-400/10 rounded-xl text-yellow-400 group-hover:scale-110 transition-transform"><i data-lucide="smartphone" class="w-6 h-6"></i></div>
                            <span class="bg-yellow-400/10 text-yellow-400 text-xs px-2 py-1 rounded border border-yellow-400/20 flex items-center gap-1"><i data-lucide="trending-up" class="w-3 h-3"></i> High</span>
                        </div>
                        <div class="flex items-baseline gap-2">
                            <h3 class="text-3xl font-bold text-white mb-1" id="stat-adoption">0</h3>
                            <span class="text-sm font-bold text-yellow-400" id="stat-adoption-pct">0%</span>
                        </div>
                        <p class="text-slate-400 text-sm font-medium">App Users (Pro)</p>
                    </div>

                    <!-- Daily Activity -->
                    <div class="glass-card p-6 rounded-2xl relative overflow-hidden group">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-green-500/10 rounded-xl text-green-400 group-hover:scale-110 transition-transform"><i data-lucide="activity" class="w-6 h-6"></i></div>
                            <span class="bg-green-500/10 text-green-400 text-xs px-2 py-1 rounded border border-green-500/20">Live</span>
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-1">42</h3>
                        <p class="text-slate-400 text-sm font-medium">Active Today</p>
                    </div>

                    <!-- Alerts -->
                    <div class="glass-card p-6 rounded-2xl relative overflow-hidden group">
                        <div class="flex justify-between items-start mb-4">
                            <div class="p-3 bg-red-500/10 rounded-xl text-red-400 group-hover:scale-110 transition-transform"><i data-lucide="alert-circle" class="w-6 h-6"></i></div>
                            <span class="bg-white/5 text-slate-400 text-xs px-2 py-1 rounded border border-white/5">Action Needed</span>
                        </div>
                        <h3 class="text-3xl font-bold text-white mb-1" id="stat-renewals">0</h3>
                        <p class="text-slate-400 text-sm font-medium">Renewals Due</p>
                    </div>
                </div>

                <!-- Main Content Row -->
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Chart Section -->
                    <div class="lg:col-span-2 glass-card p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="font-bold text-lg text-white">App Engagement</h3>
                                <p class="text-sm text-slate-400">Weekly active users vs total check-ins</p>
                            </div>
                            <select class="bg-slate-900 border border-white/10 text-xs rounded-lg px-3 py-1.5 text-slate-300 focus:outline-none">
                                <option>Last 7 Days</option>
                                <option>Last 30 Days</option>
                            </select>
                        </div>
                        <div class="h-72 w-full">
                            <canvas id="activityChart"></canvas>
                        </div>
                    </div>

                    <!-- Quick Actions Panel -->
                    <div class="glass-card p-6 rounded-2xl flex flex-col">
                        <h3 class="font-bold text-lg text-white mb-1">Quick Management</h3>
                        <p class="text-sm text-slate-400 mb-6">Common administrative tasks</p>
                        
                        <div class="space-y-3 flex-1">
                            <button onclick="openAddMemberModal()" class="w-full text-left p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-yellow-400/30 transition-all flex items-center gap-4 group">
                                <div class="bg-yellow-400/10 p-2.5 rounded-lg text-yellow-400 group-hover:bg-yellow-400 group-hover:text-slate-900 transition-colors">
                                    <i data-lucide="user-plus" class="w-5 h-5"></i>
                                </div>
                                <div>
                                    <span class="block font-bold text-sm text-white group-hover:text-yellow-400 transition-colors">Add New Member</span>
                                    <span class="block text-xs text-slate-500">Create profile & assign plan</span>
                                </div>
                                <i data-lucide="chevron-right" class="w-4 h-4 text-slate-600 ml-auto group-hover:translate-x-1 transition-transform"></i>
                            </button>

                            <button onclick="showPage('access')" class="w-full text-left p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-blue-400/30 transition-all flex items-center gap-4 group">
                                <div class="bg-blue-400/10 p-2.5 rounded-lg text-blue-400 group-hover:bg-blue-400 group-hover:text-slate-900 transition-colors">
                                    <i data-lucide="shield-check" class="w-5 h-5"></i>
                                </div>
                                <div>
                                    <span class="block font-bold text-sm text-white group-hover:text-blue-400 transition-colors">Manage App Access</span>
                                    <span class="block text-xs text-slate-500">Grant/Revoke Pro features</span>
                                </div>
                                <i data-lucide="chevron-right" class="w-4 h-4 text-slate-600 ml-auto group-hover:translate-x-1 transition-transform"></i>
                            </button>

                            <button onclick="exportCSV()" class="w-full text-left p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-green-400/30 transition-all flex items-center gap-4 group">
                                <div class="bg-green-400/10 p-2.5 rounded-lg text-green-400 group-hover:bg-green-400 group-hover:text-slate-900 transition-colors">
                                    <i data-lucide="download" class="w-5 h-5"></i>
                                </div>
                                <div>
                                    <span class="block font-bold text-sm text-white group-hover:text-green-400 transition-colors">Export Member Data</span>
                                    <span class="block text-xs text-slate-500">Download CSV report</span>
                                </div>
                                <i data-lucide="chevron-right" class="w-4 h-4 text-slate-600 ml-auto group-hover:translate-x-1 transition-transform"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MEMBERS VIEW -->
            <div id="view-members" class="page-view hidden space-y-6 fade-in">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                    <div>
                        <h3 class="text-xl font-bold text-white">Member Directory</h3>
                        <p class="text-sm text-slate-400">View and manage all registered members</p>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
                        <div class="relative w-full sm:w-64">
                            <i data-lucide="search" class="w-4 h-4 text-slate-400 absolute left-3 top-3"></i>
                            <input type="text" id="member-search" oninput="renderMembersTable()" placeholder="Search by name, email, ID..." class="w-full bg-slate-800 border border-white/10 rounded-lg py-2.5 pl-9 pr-4 text-sm text-white focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 outline-none">
                        </div>
                        <button onclick="openAddMemberModal()" class="bg-yellow-400 hover:bg-yellow-300 text-slate-900 px-5 py-2.5 rounded-lg font-bold text-sm flex items-center justify-center gap-2 shadow-lg shadow-yellow-400/20 transition-all active:scale-95 whitespace-nowrap">
                            <i data-lucide="user-plus" class="w-4 h-4"></i> Add Member
                        </button>
                    </div>
                </div>
                
                <div class="glass-card rounded-2xl overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="text-xs text-slate-400 uppercase bg-slate-900/50 border-b border-white/10">
                                <tr>
                                    <th class="px-6 py-4 font-semibold tracking-wider">Member Details</th>
                                    <th class="px-6 py-4 font-semibold tracking-wider">Contact Info</th>
                                    <th class="px-6 py-4 font-semibold tracking-wider">Membership Plan</th>
                                    <th class="px-6 py-4 font-semibold tracking-wider">Status</th>
                                    <th class="px-6 py-4 font-semibold tracking-wider text-right">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="members-table-body" class="text-slate-300 divide-y divide-white/5">
                                <!-- JS will populate this -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Empty State Placeholder (Hidden by default) -->
                    <div id="members-empty" class="hidden p-12 text-center">
                        <div class="bg-white/5 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-500"><i data-lucide="search-x" class="w-8 h-8"></i></div>
                        <h4 class="text-white font-bold">No members found</h4>
                        <p class="text-slate-400 text-sm">Try adjusting your search terms.</p>
                    </div>
                </div>
            </div>

            <!-- ACCESS CONTROL VIEW -->
            <div id="view-access" class="page-view hidden space-y-6 fade-in">
                <!-- Header Banner -->
                <div class="relative overflow-hidden rounded-2xl border border-yellow-400/20 bg-slate-800">
                    <div class="absolute inset-0 bg-gradient-to-r from-yellow-400/10 via-transparent to-transparent z-0"></div>
                    <div class="absolute right-0 top-0 h-full w-1/3 bg-gradient-to-l from-yellow-400/5 to-transparent pointer-events-none"></div>
                    <div class="relative z-10 p-8 flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
                        <div>
                            <div class="flex items-center gap-2 mb-2 text-yellow-400">
                                <i data-lucide="shield-check" class="w-5 h-5"></i>
                                <span class="font-bold uppercase tracking-wider text-xs">Yuguyu Pro Access</span>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-2">App Access Management</h3>
                            <p class="text-slate-300 text-sm max-w-xl">
                                Control digital access for your members. Granting access enables the mobile app features. Revoking it immediately downgrades them to the free tier.
                            </p>
                        </div>
                        <div class="flex gap-4 text-center">
                            <div class="bg-slate-900/50 p-4 rounded-xl border border-white/5 backdrop-blur-sm">
                                <span class="block text-2xl font-bold text-white" id="access-granted-count">0</span>
                                <span class="text-xs text-slate-400 uppercase font-bold">Granted</span>
                            </div>
                            <div class="bg-slate-900/50 p-4 rounded-xl border border-white/5 backdrop-blur-sm">
                                <span class="block text-2xl font-bold text-slate-400" id="access-total-count">0</span>
                                <span class="text-xs text-slate-500 uppercase font-bold">Total</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card rounded-2xl p-6">
                    <div class="flex flex-col md:flex-row justify-between mb-6 gap-4 border-b border-white/5 pb-6">
                        <h4 class="font-bold text-lg text-white self-center">Member Access List</h4>
                        <div class="relative w-full md:w-80">
                            <i data-lucide="search" class="w-4 h-4 text-slate-400 absolute left-3 top-3"></i>
                            <input type="text" id="access-search" oninput="renderAccessList()" placeholder="Find member to grant/revoke..." class="w-full bg-slate-900 border border-white/10 rounded-lg py-2.5 pl-10 pr-4 text-sm text-white focus:border-blue-400 focus:ring-1 focus:ring-blue-400 outline-none transition-all">
                        </div>
                    </div>
                    <div id="access-list-container" class="space-y-3">
                        <!-- JS will populate -->
                    </div>
                </div>
            </div>

            <!-- TRAINERS VIEW -->
            <div id="view-trainers" class="page-view hidden space-y-6 fade-in">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                    <div>
                        <h3 class="text-xl font-bold text-white">Trainer Overview</h3>
                        <p class="text-sm text-slate-400">Performance metrics and client load</p>
                    </div>
                    <button onclick="exportCSV()" class="bg-slate-800 hover:bg-slate-700 border border-white/10 text-white px-4 py-2.5 rounded-lg font-medium text-sm flex items-center gap-2 transition-colors">
                        <i data-lucide="download" class="w-4 h-4"></i> Export Report
                    </button>
                </div>
                <div id="trainers-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- JS will populate -->
                </div>
            </div>

        </div>
    </main>

    <!-- ADD MEMBER MODAL -->
    <div id="addMemberModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 backdrop-blur-md p-4">
        <div class="modal-content glass-card p-8 rounded-2xl w-full max-w-md border border-white/10 shadow-2xl bg-slate-900 relative">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h3 class="text-xl font-bold text-white">Add New Member</h3>
                    <p class="text-xs text-slate-400 mt-1">Create a profile to manage their subscription.</p>
                </div>
                <button onclick="closeModal('addMemberModal')" class="text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 p-2 rounded-lg transition-colors"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            
            <form id="addMemberForm" onsubmit="handleAddMember(event)" class="space-y-5">
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-400 mb-1.5 uppercase tracking-wide">Full Name</label>
                        <div class="relative">
                            <i data-lucide="user" class="w-4 h-4 text-slate-500 absolute left-3 top-3"></i>
                            <input type="text" name="name" required placeholder="e.g. John Doe" class="w-full bg-slate-800 border border-white/10 rounded-lg py-2.5 pl-10 pr-4 text-white focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 outline-none text-sm transition-all">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-400 mb-1.5 uppercase tracking-wide">Email Address</label>
                        <div class="relative">
                            <i data-lucide="mail" class="w-4 h-4 text-slate-500 absolute left-3 top-3"></i>
                            <input type="email" name="email" required placeholder="john@example.com" class="w-full bg-slate-800 border border-white/10 rounded-lg py-2.5 pl-10 pr-4 text-white focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 outline-none text-sm transition-all">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-400 mb-1.5 uppercase tracking-wide">Phone</label>
                            <input type="tel" name="phone" required placeholder="+91..." class="w-full bg-slate-800 border border-white/10 rounded-lg p-2.5 text-white focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 outline-none text-sm transition-all">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-400 mb-1.5 uppercase tracking-wide">Plan</label>
                            <div class="relative">
                                <select name="plan" class="w-full bg-slate-800 border border-white/10 rounded-lg p-2.5 text-white focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 outline-none text-sm appearance-none transition-all cursor-pointer">
                                    <option value="Gold Annual">Gold Annual</option>
                                    <option value="Silver Monthly">Silver Monthly</option>
                                    <option value="PT Package">PT Package</option>
                                </select>
                                <i data-lucide="chevron-down" class="w-4 h-4 text-slate-500 absolute right-3 top-3 pointer-events-none"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="pt-2">
                    <button type="submit" class="w-full bg-yellow-400 hover:bg-yellow-300 text-slate-900 font-bold py-3 rounded-xl shadow-lg shadow-yellow-400/20 transition-all active:scale-95 flex items-center justify-center gap-2">
                        <i data-lucide="check" class="w-4 h-4"></i> Create Member
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // --- DATA STORE (Mock Backend) ---
        const store = {
            members: [
                { id: '1', name: 'Rahul Verma', email: 'rahul.v@gmail.com', phone: '+91 98765 43210', plan: 'Gold Annual', status: 'Active', hasAccess: true, joined: '2023-01-12' },
                { id: '2', name: 'Sarah Connor', email: 'sarah.c@gmail.com', phone: '+91 98765 12345', plan: 'Silver Monthly', status: 'Paused', hasAccess: false, joined: '2023-12-01' },
                { id: '3', name: 'Mike Ross', email: 'mike.r@gmail.com', phone: '+91 77777 88888', plan: 'PT Package', status: 'Active', hasAccess: true, joined: '2023-11-15' },
                { id: '4', name: 'Priya Sharma', email: 'priya.s@gmail.com', phone: '+91 99999 00000', plan: 'Gold Annual', status: 'Active', hasAccess: false, joined: '2024-01-05' },
                { id: '5', name: 'Amit Patel', email: 'amit.p@gmail.com', phone: '+91 88888 11111', plan: 'Silver Monthly', status: 'Expired', hasAccess: false, joined: '2022-05-20' },
            ],
            trainers: [
                { id: 't1', name: 'Alex Fit', role: 'Head Trainer', clients: 14, rating: 4.9, img: 'https://ui-avatars.com/api/?name=Alex+Fit&background=0f172a&color=fff' },
                { id: 't2', name: 'Sarah Jenkins', role: 'Yoga & Mobility', clients: 8, rating: 4.7, img: 'https://ui-avatars.com/api/?name=Sarah+J&background=0f172a&color=fff' },
                { id: 't3', name: 'Marcus Doe', role: 'Strength Coach', clients: 11, rating: 4.8, img: 'https://ui-avatars.com/api/?name=Marcus+D&background=0f172a&color=fff' }
            ]
        };

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            initChart();
            refreshAllViews();
        });

        // --- RENDER FUNCTIONS ---
        function refreshAllViews() {
            renderDashboardStats();
            renderMembersTable();
            renderAccessList();
            renderTrainers();
        }

        function renderDashboardStats() {
            document.getElementById('stat-total-members').innerText = store.members.length;
            const adoption = store.members.filter(m => m.hasAccess).length;
            document.getElementById('stat-adoption').innerText = adoption;
            document.getElementById('stat-adoption-pct').innerText = Math.round((adoption / store.members.length) * 100) + '%';
            
            const renewals = store.members.filter(m => m.status === 'Active' || m.status === 'Expired').length > 5 ? 5 : 1; 
            document.getElementById('stat-renewals').innerText = renewals;

            // Update Access View Counters
            document.getElementById('access-granted-count').innerText = adoption;
            document.getElementById('access-total-count').innerText = store.members.length;
        }

        function renderMembersTable() {
            const search = document.getElementById('member-search').value.toLowerCase();
            const tbody = document.getElementById('members-table-body');
            const emptyState = document.getElementById('members-empty');
            
            tbody.innerHTML = '';

            const filtered = store.members.filter(m => 
                m.name.toLowerCase().includes(search) || 
                m.email.toLowerCase().includes(search) ||
                m.id.toLowerCase().includes(search)
            );

            if (filtered.length === 0) {
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                filtered.forEach(m => {
                    let statusClasses = '';
                    switch(m.status) {
                        case 'Active': statusClasses = 'bg-green-500/10 text-green-400 border-green-500/20'; break;
                        case 'Paused': statusClasses = 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20'; break;
                        case 'Expired': statusClasses = 'bg-red-500/10 text-red-400 border-red-500/20'; break;
                        default: statusClasses = 'bg-slate-700 text-slate-400 border-slate-600';
                    }

                    const row = `
                        <tr class="hover:bg-white/[0.02] transition-colors border-b border-white/5 last:border-0 group">
                            <td class="px-6 py-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-400 border border-white/5">${getInitials(m.name)}</div>
                                    <div>
                                        <div class="font-bold text-white group-hover:text-yellow-400 transition-colors">${m.name}</div>
                                        <div class="text-xs text-slate-500">ID: #${m.id.padStart(4, '0')}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 text-slate-400">
                                <div class="text-sm font-medium text-slate-300">${m.phone}</div>
                                <div class="text-xs opacity-70">${m.email}</div>
                            </td>
                            <td class="px-6 py-4"><span class="bg-white/5 px-2.5 py-1 rounded-md text-xs border border-white/10 font-medium">${m.plan}</span></td>
                            <td class="px-6 py-4"><span class="px-2.5 py-1 rounded-full text-xs font-bold border ${statusClasses}">${m.status}</span></td>
                            <td class="px-6 py-4 text-right">
                                <button onclick="deleteMember('${m.id}')" class="p-2 rounded-lg hover:bg-red-500/10 text-slate-500 hover:text-red-400 transition-all opacity-0 group-hover:opacity-100 focus:opacity-100" title="Delete Member">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                    tbody.innerHTML += row;
                });
            }
            lucide.createIcons();
        }

        function renderAccessList() {
            const search = document.getElementById('access-search').value.toLowerCase();
            const container = document.getElementById('access-list-container');
            container.innerHTML = '';

            const filtered = store.members.filter(m => m.name.toLowerCase().includes(search) || m.email.toLowerCase().includes(search));

            if (filtered.length === 0) {
                container.innerHTML = '<div class="text-center p-8 text-slate-500">No members found matching criteria.</div>';
                return;
            }

            filtered.forEach(m => {
                const btnAction = m.hasAccess 
                    ? `<button onclick="toggleAccess('${m.id}')" class="text-xs bg-red-500/10 text-red-400 border border-red-500/20 px-4 py-2 rounded-lg hover:bg-red-500/20 transition-all font-bold flex items-center gap-2 w-full sm:w-auto justify-center"><i data-lucide="lock" class="w-3 h-3"></i> Revoke Access</button>`
                    : `<button onclick="toggleAccess('${m.id}')" class="text-xs bg-blue-500 text-white border border-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 transition-all font-bold flex items-center gap-2 shadow-lg shadow-blue-500/20 w-full sm:w-auto justify-center"><i data-lucide="unlock" class="w-3 h-3"></i> Grant Access</button>`;
                
                const statusBadge = m.hasAccess
                    ? `<span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-green-500/10 text-green-400 border border-green-500/20"><span class="w-1.5 h-1.5 rounded-full bg-green-400"></span> Pro Active</span>`
                    : `<span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-slate-800 text-slate-400 border border-slate-700">No Access</span>`;

                const item = `
                    <div class="flex flex-col sm:flex-row items-center justify-between p-4 bg-white/[0.02] rounded-xl border border-white/5 hover:border-white/10 hover:bg-white/[0.04] transition-all gap-4 group">
                        <div class="flex items-center gap-4 w-full sm:w-auto">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-slate-700 to-slate-800 text-white border border-white/5 flex items-center justify-center font-bold text-sm shadow-inner">${getInitials(m.name)}</div>
                            <div class="min-w-0">
                                <div class="flex items-center gap-2">
                                    <p class="font-bold text-white truncate">${m.name}</p>
                                    ${m.hasAccess ? '<i data-lucide="shield-check" class="w-4 h-4 text-green-400 fill-green-400/10"></i>' : ''}
                                </div>
                                <p class="text-xs text-slate-400 truncate">${m.email}</p>
                            </div>
                        </div>
                        <div class="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto justify-between sm:justify-end">
                            ${statusBadge}
                            ${btnAction}
                        </div>
                    </div>
                `;
                container.innerHTML += item;
            });
            lucide.createIcons();
        }

        function renderTrainers() {
            const container = document.getElementById('trainers-grid');
            container.innerHTML = '';
            store.trainers.forEach(t => {
                const card = `
                    <div class="glass-card p-6 rounded-2xl flex flex-col items-center text-center group relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-yellow-400/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <div class="relative mb-4">
                            <div class="w-20 h-20 rounded-full bg-slate-700 overflow-hidden border-2 border-slate-600 p-0.5 group-hover:border-yellow-400 transition-colors shadow-lg">
                                <img src="${t.img}" alt="${t.name}" class="w-full h-full object-cover rounded-full bg-slate-800">
                            </div>
                            <div class="absolute bottom-0 right-0 bg-green-500 w-4 h-4 rounded-full border-2 border-slate-900"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white group-hover:text-yellow-400 transition-colors">${t.name}</h4>
                        <p class="text-xs text-slate-400 mb-6 bg-white/5 px-3 py-1 rounded-full border border-white/5 font-medium">${t.role}</p>
                        
                        <div class="grid grid-cols-2 gap-3 w-full mb-6">
                            <div class="bg-slate-900/50 rounded-lg p-3 border border-white/5">
                                <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider mb-1">Active Clients</p>
                                <p class="text-xl font-bold text-white">${t.clients}</p>
                            </div>
                            <div class="bg-slate-900/50 rounded-lg p-3 border border-white/5">
                                <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider mb-1">Avg Rating</p>
                                <p class="text-xl font-bold text-yellow-400 flex items-center justify-center gap-1">${t.rating} <i data-lucide="star" class="w-3.5 h-3.5 fill-current"></i></p>
                            </div>
                        </div>
                        
                        <button onclick="Swal.fire({icon:'info', title:'Feature Pending', text:'Detailed metrics coming soon!', background:'#1e293b', color:'#fff'})" class="w-full py-2.5 border border-white/10 hover:bg-white/5 text-slate-300 hover:text-white rounded-lg text-xs font-bold transition-all flex items-center justify-center gap-2">
                            View Performance <i data-lucide="arrow-right" class="w-3 h-3"></i>
                        </button>
                    </div>
                `;
                container.innerHTML += card;
            });
            lucide.createIcons();
        }

        // --- ACTIONS ---
        function openAddMemberModal() {
            document.getElementById('addMemberModal').classList.add('open');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('open');
        }

        function handleAddMember(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const newMember = {
                id: (store.members.length + 1).toString(),
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                plan: formData.get('plan'),
                status: 'Active',
                hasAccess: false,
                joined: new Date().toISOString().split('T')[0]
            };
            store.members.unshift(newMember); // Add to top
            refreshAllViews();
            closeModal('addMemberModal');
            e.target.reset();
            
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                background: '#1e293b',
                color: '#fff',
                iconColor: '#facc15'
            });
            Toast.fire({ icon: 'success', title: 'Member Added Successfully' });
        }

        function toggleAccess(id) {
            const member = store.members.find(m => m.id === id);
            member.hasAccess = !member.hasAccess;
            refreshAllViews();
            
            const msg = member.hasAccess ? `Access Granted to ${member.name}` : `Access Revoked for ${member.name}`;
            const icon = member.hasAccess ? 'success' : 'info';
            
            const Toast = Swal.mixin({
                toast: true,
                position: 'bottom-end',
                showConfirmButton: false,
                timer: 2000,
                background: '#1e293b',
                color: '#fff',
                iconColor: icon === 'success' ? '#4ade80' : '#facc15'
            });
            Toast.fire({ icon: icon, title: msg });
        }

        function deleteMember(id) {
            Swal.fire({
                title: 'Delete Member?',
                text: "This action cannot be undone.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#ef4444',
                cancelButtonColor: '#334155',
                confirmButtonText: 'Yes, delete',
                background: '#1e293b',
                color: '#fff',
                iconColor: '#ef4444'
            }).then((result) => {
                if (result.isConfirmed) {
                    store.members = store.members.filter(m => m.id !== id);
                    refreshAllViews();
                    Swal.fire({
                        title: 'Deleted!',
                        text: 'Member has been removed.',
                        icon: 'success',
                        background: '#1e293b',
                        color: '#fff',
                        timer: 1500,
                        showConfirmButton: false,
                        iconColor: '#facc15'
                    });
                }
            })
        }

        function exportCSV() {
            let csv = 'ID,Name,Email,Phone,Plan,Status,App_Access\n';
            store.members.forEach(m => {
                csv += `${m.id},"${m.name}",${m.email},${m.phone},${m.plan},${m.status},${m.hasAccess ? 'Yes' : 'No'}\n`;
            });
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `yuguyu_members_export_${new Date().toISOString().slice(0,10)}.csv`;
            a.click();
        }

        function logout() {
            Swal.fire({
                title: 'Logging Out',
                text: 'Securely ending your session...',
                timer: 1500,
                showConfirmButton: false,
                background: '#1e293b',
                color: '#fff',
                willClose: () => {
                    window.location.reload();
                }
            });
        }

        // --- UTILS ---
        function getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        }

        // --- CHART JS SETUP ---
        function initChart() {
            const ctx = document.getElementById('activityChart').getContext('2d');
            
            // Gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(250, 204, 21, 0.4)'); 
            gradient.addColorStop(1, 'rgba(250, 204, 21, 0.0)');

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Active Users',
                        data: [45, 59, 80, 81, 56, 95, 62],
                        borderColor: '#facc15',
                        backgroundColor: gradient,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#0f172a',
                        pointBorderColor: '#facc15',
                        pointBorderWidth: 2,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            titleColor: '#fff',
                            bodyColor: '#cbd5e1',
                            borderColor: 'rgba(255,255,255,0.1)',
                            borderWidth: 1,
                            padding: 10,
                            displayColors: false,
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255,255,255,0.05)' },
                            ticks: { color: '#64748b', font: {size: 10} },
                            border: { display: false }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#64748b', font: {size: 10} },
                            border: { display: false }
                        }
                    }
                }
            });
        }

        // --- NAVIGATION ---
        function showPage(pageId) {
            document.querySelectorAll('.page-view').forEach(view => {
                view.classList.add('hidden');
                view.style.opacity = 0;
            });

            const selectedView = document.getElementById('view-' + pageId);
            if (selectedView) {
                selectedView.classList.remove('hidden');
                requestAnimationFrame(() => { selectedView.style.opacity = 1; });
            }

            // Update Active State
            const buttons = document.querySelectorAll('.nav-item');
            buttons.forEach(btn => btn.classList.remove('active', 'text-yellow-400', 'bg-white/5'));
            
            const map = { 'dashboard': 0, 'members': 1, 'access': 2, 'trainers': 3 };
            if (map[pageId] !== undefined) {
                buttons[map[pageId]].classList.add('active');
            }

            const titles = {
                'dashboard': { t: 'Dashboard Overview', s: 'Manage your facility\'s digital ecosystem' },
                'members': { t: 'Member Directory', s: 'View and manage all registered members' },
                'access': { t: 'Access Management', s: 'Control Yuguyu Pro app permissions' },
                'trainers': { t: 'Trainer Overview', s: 'Staff performance and client load' }
            };
            document.getElementById('page-title').innerText = titles[pageId].t;
            document.getElementById('page-subtitle').innerText = titles[pageId].s;
            
            // Close mobile sidebar if open
            if (window.innerWidth < 1024) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
            }
        }
    </script>
</body>
</html>
